<app-dashboard-layout>
  <div class="main-content">

    <section class="search-section">
      <div class="header-with-search">
        <h2>{{ currentUser.szerep === 'diak' ? 'Ismerősök keresése' : 'Diákok keresése' }}</h2>
        <div class="search-bar">
          <input type="text" placeholder="Keresés..." (input)="onSearch($event)" class="search-input" />
        </div>
      </div>

      <div class="user-grid">
        <div *ngFor="let u of users" class="user-card">
          <div class="user-header">
            <img src="assets/images/profilkep_placeholder.jpg" alt="Profilkép" class="avatar-circle">
          </div>
          <h3>{{ u.nev }}</h3>

          <button (click)="onAddContact(u.id)" class="btn-invite" [disabled]="u.alreadySent"
            [style.opacity]="u.alreadySent ? '0.5' : '1'">
            {{ u.alreadySent ? 'Elküldve' : 'Jelölés' }}
          </button>
        </div>
      </div>
    </section>

    <hr class="divider">

    <section class="requests-section">
      <h3>Beérkező kérések ({{ pendingRequests.length }})</h3>

      <div class="requests-list">
        <div *ngFor="let req of pendingRequests" class="request-item">
          <div class="request-info">
            <img src="assets/images/profilkep_placeholder.jpg" alt="Profilkép" class="avatar-small">
            <div>
              <p class="request-name">{{ req.nev }}</p>
              <p class="request-meta">Ismerősnek jelölt</p>
            </div>
          </div>
          <div class="request-actions">
            <button (click)="handleRequest(req.request_id, 'accepted')" class="btn-accept">Elfogadás</button>
            <button (click)="handleRequest(req.request_id, 'rejected')" class="btn-decide-later">Elutasítás</button>
          </div>
        </div>

        <div *ngIf="pendingRequests.length === 0" class="empty-state">
          Nincs függőben lévő bejövő kérésed.
        </div>
      </div>
    </section>

  </div>
</app-dashboard-layout>