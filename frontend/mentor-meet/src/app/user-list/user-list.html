<div class="main-content">

  <section class="search-section">
    <div class="header-with-search">
      <h2>{{ currentUser.szerep === 'diak' ? 'Mentorok keres√©se' : '√öj menteek keres√©se' }}</h2>
      
      <div class="search-bar">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
        <input type="text" placeholder="Keres√©s n√©v alapj√°n..." (input)="onSearch($event)" class="search-input" />
      </div>
    </div>

    <div class="user-grid">
      <div *ngFor="let u of users" class="user-card">
        <div class="user-header">
          <img [src]="u.profilkep_eleres || 'assets/images/profilkep_placeholder.jpg'" alt="Profilk√©p" class="avatar-circle">
        </div>
        <h3>{{ u.nev }}</h3>
        
        <p class="user-role">{{ u.szerep === 'tanar' ? 'Mentor' : 'Mentee' }}</p>

        <div class="user-actions">
          <button [routerLink]="['/user-profile', u.id]" class="btn-view">
            üëÅÔ∏è Profil
          </button>

          <button (click)="onAddContact(u.id)" class="btn-invite" [disabled]="u.alreadySent"
            [style.opacity]="u.alreadySent ? '0.5' : '1'">
            {{ u.alreadySent ? 'Elk√ºldve' : 'Jel√∂l√©s' }}
          </button>
        </div>
      </div>
      
      <div *ngIf="users.length === 0" class="empty-state">
        <p>Nem tal√°lhat√≥ el√©rhet≈ë {{ currentUser.szerep === 'diak' ? 'mentor' : 'mentee' }} az iskol√°dban.</p>
      </div>
    </div>
  </section>

  <hr class="divider">

  <section class="requests-section">
    <h3>Be√©rkez≈ë k√©r√©sek ({{ pendingRequests.length }})</h3>

    <div class="requests-list">
      <div *ngFor="let req of pendingRequests" class="request-item">
        <div class="request-info">
          <img [src]="req.profilkep_eleres || 'assets/images/profilkep_placeholder.jpg'" 
               alt="Profilk√©p" 
               class="avatar-small"
               [routerLink]="['/user-profile', req.felado_id || req.id]"
               style="cursor: pointer;">
          <div>
            <p class="request-name" 
               [routerLink]="['/user-profile', req.felado_id || req.id]"
               style="cursor: pointer;">
               {{ req.nev }}
            </p>
            <p class="request-meta">Ismer≈ësnek jel√∂lt</p>
          </div>
        </div>
        <div class="request-actions">
          <button (click)="handleRequest(req.request_id, 'accepted')" class="btn-accept">Elfogad√°s</button>
          <button (click)="handleRequest(req.request_id, 'rejected')" class="btn-decide-later">Elutas√≠t√°s</button>
        </div>
      </div>

      <div *ngIf="pendingRequests.length === 0" class="empty-state">
        <p>Nincs f√ºgg≈ëben l√©v≈ë bej√∂v≈ë k√©r√©sed.</p>
      </div>
    </div>
  </section>

</div>