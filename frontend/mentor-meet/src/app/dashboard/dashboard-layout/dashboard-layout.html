<div class="dashboard-wrapper">
  <aside class="sidebar">
    <div class="brand">
      <img src="assets/images/egyszeru-logo.png" alt="M" class="logo-img">
      <span class="brand-name">MentorMeet</span>
    </div>

    <nav class="nav-menu">
      <a routerLink="/user-list" routerLinkActive="active" class="nav-item">
        <img src="assets/images/icons/searchsvg.svg" class="nav-svg" alt="Search">
        <span>Keresés</span>
      </a>

      <a [routerLink]="currentUser?.szerep === 'tanar' ? '/teacher-dashboard' : '/student-dashboard'" 
         routerLinkActive="active" class="nav-item">
        <img src="assets/images/icons/profilesvg.svg" class="nav-svg" alt="Profile">
        <span>Profil</span>
      </a>

      <a routerLink="/chat" routerLinkActive="active" class="nav-item">
        <img src="assets/images/icons/chatsvg.svg" class="nav-svg" alt="Chat">
        <span>Chat</span>
      </a>
    </nav>

    <div class="nav-user-info" *ngIf="currentUser">
      <img src="assets/images/profilkep_placeholder.jpg" class="nav-avatar">
      <div class="text-info">
        <p class="nav-name">{{ currentUser.nev }}</p>
        <p class="nav-role">{{ currentUser.szerep === 'diak' ? 'Tanuló' : 'Oktató' }}</p>
      </div>
    </div>
  </aside>

  <main class="content-area">
    <header class="content-header">
      <div class="header-left">
        <h1>{{ currentUser?.szerep === 'tanar' ? 'Profil szerkesztése' : 'Tanulói Portál' }}</h1>
      </div>

      <div class="header-right">
        <div class="notification-container">
          <button class="icon-btn" (click)="toggleNotifications()">
            <img src="assets/images/icons/notificationsvg.svg" alt="Notifications" class="header-svg">
            <span class="badge" *ngIf="pendingRequests.length">{{ pendingRequests.length }}</span>
          </button>

          <div class="notif-dropdown" *ngIf="isNotificationOpen">
            <div class="dropdown-header">
              <h3>Értesítések</h3>
            </div>
            <div class="notif-scroll-area">
              <div *ngFor="let req of pendingRequests" class="notif-item">
                <img src="assets/images/profilkep_placeholder.jpg" class="item-avatar">
                <div class="item-content">
                  <p><strong>{{ req.nev }}</strong> kapcsolódni szeretne</p>
                  <div class="item-actions">
                    <button (click)="handleRequest(req.request_id, 'accepted')" class="confirm-btn">Elfogadás</button>
                    <button (click)="handleRequest(req.request_id, 'rejected')" class="remove-btn">Elutasítás</button>
                  </div>
                </div>
              </div>
              <div *ngIf="pendingRequests.length === 0" class="empty-notif">Nincs új értesítés.</div>
            </div>
          </div>
        </div>

        <button class="icon-btn" (click)="goToProfileEdit()">
          <img src="assets/images/icons/settingssvg.svg" alt="Settings" class="header-svg">
        </button>
      </div>
    </header>

    <div class="scroll-content">
      <router-outlet></router-outlet>
    </div>
  </main>
</div>