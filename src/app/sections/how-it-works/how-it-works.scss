/* how-it-works.scss */

/* Színek – ha már máshol definiálod őket, ezt a blokkot nyugodtan töröld */
$bg: #faf9f6;
$text: #2c2c2c;
$muted: #8a8f98;
$dot: #cfd5dd;

.how-it-works {
  background: $bg;
  padding: clamp(2.5rem, 4vw, 4rem) 0;

  /* vágjuk le minden dekor elem túlnyúlását */
  overflow-x: clip; /* modern böngészők */
  @supports not (overflow-x: clip) {
    overflow-x: hidden; /* fallback */
  }

  .container {
    max-width: 1120px;
    margin: 0 auto;
    padding: 0 16px;
  }

  .heading {
    text-align: center;
    margin-bottom: clamp(1.5rem, 3vw, 2.5rem);

    h2 {
      font-size: clamp(1.5rem, 2.8vw, 2rem);
      font-weight: 700;
      color: $text;
      margin: 0 0 .5rem 0;
    }

    .subtitle {
      margin: 0;
      color: $muted;
      font-size: clamp(.95rem, 1.6vw, 1.05rem);
    }
  }

  .steps {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: clamp(1.25rem, 2vw, 2rem);
    list-style: none;
    padding: 0;
    margin: 0;

    /* biztosíték: gyerek pseudo-elemek se húzzák szét */
    overflow: visible;
  }

  .step {
    position: relative;
    text-align: center;
    padding: 0px 10px;

    /* Íves, szaggatott nyíl – úgy méretezve, hogy ne lógjon ki */
    &:not(:last-child)::after {
      content: '';
      position: absolute;
      top: 44%;
      right: -2%; /* -7% helyett óvatosabb */
      width: clamp(100px, 12vw, 150px);
      height: clamp(34px, 5.5vw, 60px);
      background-repeat: no-repeat;
      background-size: contain;
      pointer-events: none;

      /* inline SVG – halvány szaggatott ív nyílheggyel */
      background-image: url("data:image/svg+xml;utf8,\
        <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 80'>\
          <defs>\
            <marker id='arrow' markerWidth='10' markerHeight='8' refX='10' refY='4' orient='auto'>\
              <path d='M0,0 L10,4 L0,8 z' fill='%23c0c6cf'/>\
            </marker>\
          </defs>\
          <path d='M5,70 C70,10 130,10 195,30' fill='none' stroke='%23c0c6cf' stroke-width='2' stroke-dasharray='6 8' marker-end='url(%23arrow)'/>\
        </svg>");
    }

    .num {
      position: absolute;
      left: 50%;
      transform: translateX(-160%);
      top: -6px;
      width: 34px;
      height: 34px;
      border-radius: 50%;
      background: #eef0f3;
      color: #737b86;
      display: grid;
      place-items: center;
      font-weight: 700;
      font-size: 0.95rem;
      box-shadow: 0 1px 0 rgba(0,0,0,.03) inset;
    }

    .icon-wrap {
      width: clamp(140px, 18vw, 180px);
      height: clamp(140px, 18vw, 180px);
      margin: 0 auto 14px;
      border: 2px dashed $dot;
      border-radius: 50%;
      background: #fff;
      display: grid;
      place-items: center;

      img {
        width: 60%;
        height: auto;
        display: block;
        max-width: 100%; /* sose lógjon ki */
      }
    }

    .step-title {
      margin: 6px 0 4px;
      font-size: clamp(1rem, 1.4vw, 1.1rem);
      font-weight: 700;
      color: $text;
    }

    .step-desc {
      margin: 0 auto;
      max-width: 320px;
      color: $muted;
      font-size: .95rem;
      line-height: 1.45;
    }
  }

  /* Mobil / tablet */
  @media (max-width: 900px) {
    .steps {
      grid-template-columns: 1fr;
      gap: 1.75rem;
    }

    .step {
      &:not(:last-child)::after {
        display: none; /* mobilon nem kell nyíl */
      }

      .num {
        position: static;
        transform: none;
        margin: 0 auto 8px;
      }
    }
  }
}

/* --- vízszintes túlnyúlás elleni biztosítékok --- */

/* Globál: ne lehessen oldalra görgetni */
html, body { max-width: 100%; overflow-x: hidden; }

/* A szekció és a rács mindent klippel */
.how-it-works { position: relative; overflow-x: clip; }
@supports not (overflow-x: clip) {
  .how-it-works { overflow-x: hidden; }
}

.how-it-works .steps { position: relative; overflow: clip; }

/* A nyíl ne lógjon ki: jobbratolás erősen korlátozva, szélesség is kisebb */
.how-it-works .step:not(:last-child)::after {
  right: clamp(-12px, -1.5vw, -6px);   /* eddigi -7% helyett */
  width: clamp(90px, 10vw, 140px);
  height: clamp(30px, 5vw, 56px);
}

/* Képek ne tudjanak széthúzni semmit */
.how-it-works img { max-width: 100%; height: auto; display: block; }

/* Kis képernyőn teljesen kapcsold ki a nyilat */
@media (max-width: 1100px) {
  .how-it-works .step:not(:last-child)::after { display: none; }
}


